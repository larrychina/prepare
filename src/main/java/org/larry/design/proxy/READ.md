### 代理模式

可以理解为一定程度上的行为增强，嫁衣神功


#### jdk动态代理与cglib

1, jdk动态代理实现了被代理的接口，而cglib代理继承了被代理的对象  
2， jdk代理和cglib 都是在运行期生成字节码，jdk直接写class字节码，
    cglib代理使用asm框架写class字节码，cglib代理实现更复杂，生成代理类比Jdk代理效率低  
3，jdk动态代理调用代理方法是通过反射机制调用的，cglib代理是通过fastclass增强功能机制直接调用方法的，
   cglib代理的执行效率更高


    fastclass机制是cglib中提供的增强功能，主要针对调用方法是变量的场景，用于替换反射调用。

    fast class实现逻辑是，生成增强类实现invoke方法，在invoke方法中，
    用switch语义将被增强类的所有方法调用枚举出来。用户使用FastClass.invoke方法，
    传入方法签名和被调用实例，从而达到不使用反射就能实现不确定方法的调用。   


####    静态代理和动态代理

1，静态代理只能通过手动完成代理操作，如果被代理类增加了方法，代理类需要同步增加，违背开闭原则

2，动态代理是在运行时动态的生成代码的方式，取消了被代理类的扩展限制，符合开闭原则

3，若动态代理要对目标类增强逻辑进行扩展，结合策略模式，只需要增加策略类即可，而无需修改代理类


####  代理模式优缺点

优点：

1，将代理对象和被调用的真实目标对象解耦，扩展性比较好  
2，起到了保护目标对象的作用  
3，可以对目标对象的行为进行增强


缺点：

1， 代理模式会造成系统的设计类数量增加，增加了系统的复杂度  
2， 在客户端和目标对象中增加一个代理对象，会导致请求处理的速度下降。




